# -*- coding: utf-8 -*-
"""
병원 간호사 도우미 챗봇 - 정적 데이터 모듈
하드코딩된 데이터를 통해 Python 기초 문법 학습
계층적 구조: 항목 > 세부항목 > 세부항목2
"""

# 계층적 차치업무 데이터 구조 (항목 > 세부항목 > 세부항목2)
HIERARCHICAL_WORK_DATA = {
    "수리": {
        "name": "수리",
        "description": "의료기기 수리 관련 업무",
        "keywords": ["수리", "고장", "의료기기", "장비", "문제", "브로큰", "부서진", "작동안됨"],
        "subcategories": {
            "심전도_관련": {
                "name": "심전도 관련",
                "description": "EKG/심전도 장비 수리",
                "keywords": ["EKG", "심전도", "심장", "electrocardiogram"],
                "sub_items": {
                    "EKG_수리요청": {
                        "name": "EKG 수리 요청",
                        "request_method": "📍 DARWIN 원내공통 → 의료기기 관리 → 의료기기 수리 요청 등록\n→ EKG 클릭 후 보조원님께 의공 내려달라고 요청\n→ 접수증 보관",
                        "contact": "📞 의공기술실: T.9233",
                        "free_text": "EKG 장비가 작동하지 않을 때 신속한 수리 요청을 위한 절차입니다"
                    },
                    "EKG_점검": {
                        "name": "EKG 정기 점검",
                        "request_method": "📍 정기점검 스케줄 확인 후 의공기술실에 점검 요청",
                        "contact": "📞 의공기술실: T.9233",
                        "free_text": "EKG 장비의 정확도와 안전성을 위한 정기적인 점검 절차"
                    }
                }
            },
            "산소포화도_관련": {
                "name": "산소포화도 관련",
                "description": "OXIMETER/산소포화도 측정기 수리",
                "keywords": ["OXIMETER", "산소포화도", "옥시미터", "SPO2"],
                "sub_items": {
                    "OXIMETER_수리": {
                        "name": "OXIMETER 수리",
                        "request_method": "📍 DARWIN → 의료기기 관리 → OXIMETER 수리 등록",
                        "contact": "📞 의공기술실: T.9233",
                        "free_text": "산소포화도 측정기 오작동 시 수리 요청 방법"
                    },
                    "센서_교체": {
                        "name": "센서 교체",
                        "request_method": "📍 물품청구 → 센서 주문 후 교체",
                        "contact": "📞 의공기술실: T.9233",
                        "free_text": "산소포화도 센서가 손상되었을 때 교체 절차"
                    }
                }
            },
            "인퓨전펌프_관련": {
                "name": "인퓨전펌프 관련",
                "description": "수액 주입 펌프 관련 수리",
                "keywords": ["인퓨전펌프", "수액펌프", "INFUSION", "PUMP"],
                "sub_items": {
                    "펌프_수리": {
                        "name": "인퓨전펌프 수리",
                        "request_method": "📍 DARWIN → 의료기기 관리 → 인퓨전펌프 수리 신청",
                        "contact": "📞 의공기술실: T.9233",
                        "free_text": "수액 주입 정확도에 문제가 있을 때 즉시 수리 요청"
                    },
                    "알람_해제": {
                        "name": "알람 해제",
                        "request_method": "📍 기본 트러블슈팅 후 지속시 의공 연락",
                        "contact": "📞 의공기술실: T.9233",
                        "free_text": "인퓨전펌프 오류 알람이 지속될 때 대응 방법"
                    }
                }
            }
        }
    },
    "물품": {
        "name": "물품",
        "description": "물품 구매 및 청구 관련 업무",
        "keywords": ["물품", "구매", "청구", "공급형태", "조회", "DARWIN", "구매의뢰", "CPOE"],
        "subcategories": {
            "구매형태_조회": {
                "name": "구매형태 조회",
                "description": "물품별 공급형태 확인",
                "keywords": ["공급형태", "조회", "확인"],
                "sub_items": {
                    "DARWIN_조회": {
                        "name": "DARWIN 시스템 조회",
                        "request_method": "📍 DARWIN [물품청구 및 구매의뢰] → [물품별 공급형태 조회]",
                        "contact": "📞 구매팀: T.1400",
                        "free_text": "물품의 공급 방식을 확인하여 올바른 청구 방법을 파악"
                    },
                    "구분탭_확인": {
                        "name": "구분탭 확인",
                        "request_method": "📍 [구분] 탭의 각 항목을 클릭하여 확인",
                        "contact": "📞 구매팀: T.1400",
                        "free_text": "카테고리별로 물품 공급형태를 체계적으로 확인"
                    }
                }
            },
            "CPOE_관련": {
                "name": "CPOE 관련",
                "description": "처치 입력시 자동 불출 물품",
                "keywords": ["CPOE", "처치입력", "자동불출"],
                "sub_items": {
                    "자동불출_확인": {
                        "name": "자동불출 확인",
                        "request_method": "📍 처치 입력시 자동으로 물품 불출됨을 확인",
                        "contact": "📞 간호과: T.1100",
                        "free_text": "처치와 연결된 물품이 자동으로 청구되는 시스템"
                    }
                }
            },
            "정수보충": {
                "name": "정수보충",
                "description": "정수에 맞추어 추가 보충하는 물품",
                "keywords": ["정수보충", "보충", "추가"],
                "sub_items": {
                    "정수_확인": {
                        "name": "정수 확인",
                        "request_method": "📍 각 부서별 정수량 확인 후 부족분 신청",
                        "contact": "📞 구매팀: T.1400",
                        "free_text": "정해진 수량에 맞춰 부족한 물품을 추가로 보충"
                    }
                }
            }
        }
    },
    "멸균품거즈": {
        "name": "멸균품/거즈",
        "description": "멸균물품 및 거즈 공급 관련",
        "keywords": ["멸균품", "거즈", "gauze", "공급일", "청구", "응급", "정수교환"],
        "subcategories": {
            "거즈_공급": {
                "name": "거즈 공급",
                "description": "거즈 정기 공급 및 응급 청구",
                "keywords": ["거즈", "gauze", "공급"],
                "sub_items": {
                    "정기_공급": {
                        "name": "정기 거즈 공급",
                        "request_method": "📅 공급일: 월~토요일 주 6일\n📦 매일 자동청구로 올라옴\n⏰ 아침마다 병동 거즈 수량 확인 후 개수 조정 필요",
                        "contact": "📞 멸균실: T.2100",
                        "free_text": "매일 자동으로 청구되는 거즈 공급 시스템으로 수량 조정 가능"
                    },
                    "응급_청구": {
                        "name": "응급 거즈 청구",
                        "request_method": "📍 DARWIN-'멸균품 청구'-'멸균소모품' → 응급청구",
                        "contact": "📞 멸균실: T.2100",
                        "free_text": "예상보다 많은 거즈가 필요할 때 즉시 추가 청구"
                    }
                }
            },
            "거즈_종류": {
                "name": "거즈 종류",
                "description": "사용 가능한 거즈 유형",
                "keywords": ["S70404", "S70407", "S70408", "S70410"],
                "sub_items": {
                    "소형_거즈": {
                        "name": "소형 거즈 (2x2)",
                        "request_method": "📍 S70404 gauze 2×2(2) 5개 단위로 청구",
                        "contact": "📞 멸균실: T.2100",
                        "free_text": "작은 상처나 세밀한 처치에 사용하는 소형 거즈"
                    },
                    "중형_거즈": {
                        "name": "중형 거즈 (4x3)",
                        "request_method": "📍 S70407 gauze 4×3(2) 10개 / S70408 gauze 4×3(6) 20개",
                        "contact": "📞 멸균실: T.2100",
                        "free_text": "일반적인 상처 처치에 가장 많이 사용되는 표준 크기"
                    },
                    "대형_거즈": {
                        "name": "대형 거즈 (4x8)",
                        "request_method": "📍 S70410 gauze 4×8(5) 20개 단위로 청구",
                        "contact": "📞 멸균실: T.2100",
                        "free_text": "큰 상처나 수술 후 드레싱에 사용하는 대형 거즈"
                    }
                }
            }
        }
    },
    "격리실": {
        "name": "격리실",
        "description": "감염 격리 관련 업무",
        "keywords": ["격리실", "VRE", "CPE", "음압격리", "coronavirus", "격리물품", "세팅", "isolation"],
        "subcategories": {
            "VRE_격리": {
                "name": "VRE 격리",
                "description": "반코마이신 내성 장구균 격리",
                "keywords": ["VRE", "반코마이신", "장구균"],
                "sub_items": {
                    "격리실_운영": {
                        "name": "VRE 격리실 운영",
                        "request_method": "🦠 VRE 격리실 운영 절차:\n1. 격리물품 세팅\n2. 기본처방 isolation 필요 + 격리병실신청서 작성(의사)\n3. 원무과 통지\n4. C10E 1/2인실 또는 C08E 825호 배정\n5. 전실/전동 상황 담당간호사와 보조원 공유\n6. SBAR-P 검체부위, 검사일 정리\n7. 식기소독 의뢰",
                        "contact": "📞 감염관리실: T.1200",
                        "free_text": "VRE 감염 환자의 격리 및 관리를 위한 체계적 절차"
                    }
                }
            },
            "CPE_격리": {
                "name": "CPE 격리", 
                "description": "카바페넴 내성 장내세균 격리",
                "keywords": ["CPE", "카바페넴", "내성"],
                "sub_items": {
                    "CPE_관리": {
                        "name": "CPE 격리 관리",
                        "request_method": "📍 VRE와 동일한 절차로 진행\n추가: 접촉주의 강화",
                        "contact": "📞 감염관리실: T.1200",
                        "free_text": "카바페넴 내성균에 대한 엄격한 격리 관리 절차"
                    }
                }
            },
            "음압격리": {
                "name": "음압격리",
                "description": "공기감염 질환 격리",
                "keywords": ["음압", "공기감염", "결핵"],
                "sub_items": {
                    "음압실_운영": {
                        "name": "음압격리실 운영",
                        "request_method": "📍 음압격리실 배정 및 공기감염 주의사항 적용",
                        "contact": "📞 감염관리실: T.1200",
                        "free_text": "결핵 등 공기로 전파되는 감염 질환의 격리 치료"
                    }
                }
            }
        }
    }
}

# 기존 단순 구조 (하위 호환성 유지)
WORK_CATEGORIES = {
    "수리": {
        "keywords": ["수리", "고장", "의료기기", "장비", "문제", "브로큰", "부서진", "작동안됨", "EKG", "심전도", "OXIMETER", "산소포화도", "인퓨전펌프", "HFNC", "NIBP", "모니터", "제세동기", "워셔", "체중침대", "엠부", "네뷸라이저", "석션", "혈압계", "청진기", "체중계"],
        "responses": [
            "🔧 의료기기 수리 요청\n\n📍 DARWIN 원내공통 → 의료기기 관리 → 의료기기 수리 요청 등록\n→ 의료기기명 클릭 후 보조원님께 의공 내려달라고 요청\n→ 접수증 보관\n\n📞 의공기술실: T.9233",
            "수리 가능한 의료기기:\n• EKG(심전도), OXIMETER(산소포화도)\n• INFUSION PUMP(인퓨전펌프), HFNC\n• NIBP MONITOR, DEFIBRILLATOR\n• WASHER(워셔), 체중침대\n• AMBU SET, NEBULIZER, SUCTION\n• 혈압계, 청진기, 체중계 등",
            "의료기기 수리는 DARWIN 시스템을 통해 요청해주세요. 의공기술실(T.9233)에서 처리됩니다."
        ]
    },
    "물품": {
        "keywords": ["물품", "구매", "청구", "공급형태", "조회", "DARWIN", "구매의뢰", "CPOE"],
        "responses": [
            "📦 물품 구매형태 조회\n\n📍 DARWIN [물품청구 및 구매의뢰] → [물품별 공급형태 조회]\n또는 [구분] 탭의 각 항목을 클릭하여 확인",
            "물품 공급 형태:\n• CPOE (처치 입력 시 불출)\n• 정수보충 (정수에 맞추어 추가로 채워주는 물품)\n• 정수교환 (일정한 날에 일괄 새로운 것으로 교환)\n• 구매의뢰 (CPOE에 등록되지 않은 물품)",
            "물품 관련 문의는 DARWIN 시스템의 물품청구 및 구매의뢰 메뉴를 이용해주세요."
        ]
    },
    "인쇄물": {
        "keywords": ["인쇄물", "환자교육자료", "병원생활안내", "퇴원절차", "낙상예방", "욕창예방", "바코드", "검사용지", "A4용지", "책자", "리플릿"],
        "responses": [
            "📄 환자교육자료 신청\n\n📍 DARWIN-원내공통-물품청구 및 구매의뢰-입력",
            "제공 가능한 인쇄물:\n• 병원생활안내, 퇴원절차안내문\n• 낙상예방자료, 낙상체크리스트\n• 욕창예방자료, 자세변경표\n• 바코드, 검사용지, A4용지\n• 책자 및 리플릿 등",
            "환자교육자료는 DARWIN 물품청구 시스템을 통해 신청할 수 있습니다."
        ]
    },
    "제제약수액": {
        "keywords": ["제제약", "수액", "소독제", "ANIOS", "CLES", "CHLORHEXIDINE", "GLYCERINE", "POVIDONE", "LIDOCAINE", "청구", "배송", "응급", "반납", "교환"],
        "responses": [
            "💊 제제약/수액 관련 정보\n\n주요 제제약:\n• ANIOS-L Aniosurf Premium NPC 1L\n• CLES-L Clesis 500ml(카트 손소독제)\n• CLES1-L Clesis 1L(병실 앞 손소독제)\n• 2% chlorhexidine alcohol\n• 10% POVIDONE, 2% LIDOCAINE 등",
            "수액 관련 업무:\n• 수액 청구 배송일\n• 수액 응급 청구 방법\n• 꼬마병 종류/신청방법/공급일\n• 수액 반납 및 교환",
            "제제약 및 수액 관련 문의사항이 있으시면 구체적인 약물명을 알려주세요."
        ]
    },
    "멸균품거즈": {
        "keywords": ["멸균품", "거즈", "gauze", "공급일", "청구", "S70404", "S70407", "S70408", "S70410", "응급", "정수교환"],
        "responses": [
            "🧽 거즈 공급 정보\n\n📅 공급일: 월~토요일 주 6일\n📦 매일 자동청구로 올라옴\n⏰ 아침마다 병동 거즈 수량 확인 후 개수 조정 필요\n\n📍 DARWIN-'멸균품 청구'-'멸균소모품'",
            "거즈 종류:\n• S70404 gauze 2×2(2) 5개\n• S70407 gauze 4×3(2) 10개\n• S70408 gauze 4×3(6) 20개\n• S70410 gauze 4×8(5) 20개",
            "멸균품 응급 청구가 필요하시면 정수 교환 멸균 물품 목록을 확인해주세요."
        ]
    },
    "임종실": {
        "keywords": ["임종실", "호스피스", "입실기준", "섬망", "HFNC", "임종임박"],
        "responses": [
            "🕊️ 임종실 입실기준\n\n✅ 자문형 호스피스 동의환자\n✅ 말기 섬망증상, HFNC 기계 소음 (최대 7일)\n   - 섬망 기록 필요\n✅ 임종 임박 (최대 4일)",
            "임종실 이용 시 호스피스 동의와 섬망 기록이 필요합니다. 최대 이용기간을 확인해주세요."
        ]
    },
    "격리실": {
        "keywords": ["격리실", "VRE", "CPE", "음압격리", "coronavirus", "격리물품", "세팅", "isolation", "SBAR"],
        "responses": [
            "🦠 VRE 격리실 운영\n\n📋 절차:\n1. 격리물품 세팅\n2. 기본처방 isolation 필요 + 격리병실신청서 작성(의사)\n3. 원무과 통지\n4. C10E 1/2인실 또는 C08E 825호 배정\n5. 전실/전동 상황 담당간호사와 보조원 공유\n6. SBAR-P 검체부위, 검사일 정리\n7. 식기소독 의뢰",
            "격리실 종류: VRE, CPE, 음압격리, coronavirus 등\n격리병실 배정 및 세팅이 필요합니다."
        ]
    },
    "ICU전동": {
        "keywords": ["ICU", "전동", "CCU", "전과", "워크리스트", "마약반납", "전동일지", "C03M", "C03S", "02M"],
        "responses": [
            "🏥 ICU 전동 절차\n\n📍 C03M, C03S, 02M 중 전동 갈 ICU 결정 시:\n1. worklist 전과/전동 신청 tab → CCU로 전과/전동 신청\n2. 원무과에 연락\n3. 전동일지 작성 및 처치 빠짐없이 입력\n4. 마약 반납 후 전산 넘기기",
            "ICU 전동 시 워크리스트 신청과 전동일지 작성을 잊지 마세요."
        ]
    },
    "신규백업": {
        "keywords": ["신규", "백업", "backup", "인수", "인계", "중환자", "처방", "review", "acting"],
        "responses": [
            "👩‍⚕️ 신규 백업 업무\n\n📝 기본 원칙:\n• 인수 시 백업 보지 않아도 됨\n• 인계 시만 백업 보기\n\n🏥 중환자 있을 경우:\n• 중환자 처방 review 및 acting backup\n\n🏥 중환자 없을 경우:\n• D근무: 추가 처방 review, 식사 챙기기\n• E근무: 익일 처방 review, 식사 챙기기",
            "신규 백업 시 중환자 유무에 따라 업무가 달라집니다. 처방 리뷰와 식사 챙기기를 잊지 마세요."
        ]
    },
    "기타": {
        "keywords": ["기타", "NEB", "filter", "필터", "교환", "connector", "LAB", "bottle"],
        "responses": [
            "🔧 NEB 필터 관리\n\n📅 교환주기: 3개월\n🔄 교환방법: 새 필터로 교체 (동전으로 돌리면 filter 제거 가능)\n📦 여분 filter 위치: LAB bottle 있는 물품장 윗 칸\n\n📋 부품번호:\n• 535000088 85filter\n• 535006018 connector",
            "기타 업무 관련 문의사항이 있으시면 구체적으로 알려주세요."
        ]
    }
}

# 인사말 응답 패턴
GREETING_RESPONSES = [
    "안녕하세요! 차치업무 도우미입니다. 무엇을 도와드릴까요?",
    "반갑습니다! 어떤 차치업무로 문의하셨나요?",
    "안녕하세요! 필요한 정보를 찾아드리겠습니다.",
    "환영합니다! 차치업무 관련 도움이 필요하시면 말씀해주세요.",
    "좋은 하루입니다! 무엇을 도와드릴까요?"
]

# 기본 응답 (키워드 매칭이 안 될 때)
DEFAULT_RESPONSES = [
    "죄송합니다. 잘 이해하지 못했어요. 다시 말씀해주세요.",
    "좀 더 구체적으로 말씀해주시면 도움을 드릴 수 있어요.",
    "다음 중 하나를 선택해주세요: 수리, 물품, 인쇄물, 제제약수액, 멸균품거즈, 임종실, 격리실, ICU전동, 신규백업, 기타",
    "키워드를 포함해서 말씀해주시면 더 정확한 답변을 드릴 수 있습니다.",
    "차치업무 관련 카테고리를 선택하거나 구체적인 질문을 해주세요."
]

# 자주 묻는 질문 (FAQ) 데이터 - 차치업무 관련
FAQ_DATA = {
    "DARWIN": "DARWIN은 병원 내 통합정보시스템입니다. 원내공통 메뉴에서 의료기기 관리, 물품청구, 구매의뢰 등을 할 수 있습니다.",
    "의공기술실": "의료기기 수리는 의공기술실(T.9233)에서 담당합니다. DARWIN 시스템을 통해 수리 요청을 하세요.",
    "거즈공급": "거즈는 월~토요일 주 6일 자동청구됩니다. 매일 아침 수량 확인 후 개수 조정이 필요합니다.",
    "격리실": "VRE 격리실은 C10E 1/2인실 또는 C08E 825호입니다. 격리물품 세팅과 원무과 통지가 필요합니다.",
    "ICU전동": "ICU 전동 시 워크리스트에서 CCU로 전과/전동 신청 후 원무과에 연락하세요.",
    "임종실": "임종실은 호스피스 동의환자, 말기 섬망환자(최대 7일), 임종임박환자(최대 4일)가 이용 가능합니다.",
    "제제약": "제제약은 ANIOS, CLES, CHLORHEXIDINE, POVIDONE, LIDOCAINE 등이 있습니다.",
    "물품공급형태": "물품은 CPOE(처치입력시), 정수보충, 정수교환, 구매의뢰(미등록물품) 형태로 공급됩니다.",
    "신규백업": "신규 백업은 인수 시 백업 보지 않고, 인계 시만 백업을 봅니다. 중환자 유무에 따라 업무가 달라집니다.",
    "NEB필터": "NEB 필터는 3개월마다 교환하며, LAB bottle 물품장 윗 칸에 여분이 있습니다."
}

# 시간대별 인사말
TIME_GREETINGS = {
    "morning": "좋은 아침입니다! 오늘도 화이팅하세요!",
    "afternoon": "안녕하세요! 오후 업무도 파이팅입니다!",
    "evening": "저녁 시간 수고 많으십니다!",
    "night": "밤 근무 고생 많으십니다. 안전하게 근무하세요!"
}

# 응급상황 키워드 (우선순위 높음)
EMERGENCY_KEYWORDS = {
    "응급": "즉시 응급실(2222)로 연락하세요! 응급상황 프로토콜을 시작합니다.",
    "화재": "화재신고 119! 병원 내 화재경보 시스템을 작동하세요!",
    "정전": "정전 시 비상전력 시스템을 확인하고 시설팀에 즉시 연락하세요.",
    "지진": "지진 시 환자 안전 확보 후 대피 프로토콜을 따르세요.",
    "코드블루": "심폐소생술팀 호출! 모든 가용 의료진 집합!"
}

# 부서별 연락처 (차치업무 관련)
DEPARTMENT_CONTACTS = {
    "의공기술실": "T.9233",
    "원무과": "내선 1400",
    "간호과": "내선 1100",
    "약무과": "내선 1300",
    "시설팀": "내선 1500",
    "CCU": "내선 3000",
    "ICU": "내선 3100",
    "격리실 문의": "C10E 1/2인실, C08E 825호"
}
